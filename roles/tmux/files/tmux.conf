source-file ~/.config/tmux/layout.conf
source-file ~/.config/tmux/keymaps.conf

# ====================
#   Reload Config
# ====================
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"


# ====================
#   Prefix
# ====================
# change prefix to backtick
unbind C-b
set-option -g prefix `
bind ` send-prefix


# ====================
#   Settings
# ====================
setw -g aggressive-resize on                            # resizing
set -g mouse on                                         # pleb mode
setw -g mode-keys vi                                    # vi-mode for copy mode
set -g renumber-windows on    													# renumber windows after closing
set -sg escape-time 0         													# remove esc delay
set -g history-limit 10000    													# history
set-option -g terminal-overrides 'xterm*:smcup@:rmcup@' # allow terminal scrolling
set -g monitor-bell on
set -g bell-action other

# fix colors in nvim
set -g default-terminal "xterm-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"
# Undercurl
set -g default-terminal "${TERM}"
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # underscore colours - needs tmux-3.0

# ====================
#   Custom Status Bar Theme
# ====================
# Note: Status bar layout and format are defined in layout.conf
# This section only sets colors for elements not styled in layout.conf

# Message colors
set -g message-style "bg=default,fg=#89b4fa"
set -g message-command-style "bg=default,fg=#89b4fa"

# Activity styles
set -g window-status-activity-style "bg=default,fg=#f9e2af"

# ====================
#   TPM Plugin Manager
# ====================
set -g @plugin 'tmux-plugins/tpm'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
